<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>XOXO Gossip Girl - Received Tips</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://fonts.cdnfonts.com/css/sf-pro-display">

<style>
:root{
  --pink:#ff4fd8;
  --hot:#ff1aa6;
  --bg:#0c0812;
  --glass:rgba(255,255,255,.06);
}

*{box-sizing:border-box;margin:0;padding:0;font-family:'SF Pro Display','SF Arabic',system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;}

body{
  background:radial-gradient(900px 500px at 10% 10%, #2b1445, transparent),
             radial-gradient(900px 500px at 90% 20%, #1b2c5a, transparent),
             var(--bg);
  color:white;
  min-height:100vh;
  transition:all .4s ease;
}

header{
  position:sticky;top:0;z-index:10;
  backdrop-filter:blur(14px);
  background:linear-gradient(90deg,rgba(255,79,216,.25),rgba(207,210,255,.15));
  border-bottom:1px solid rgba(255,255,255,.12);
  padding:14px;
  text-align:center;
}

.logo{font-weight:900;letter-spacing:2px;font-size:22px;text-shadow:0 0 14px var(--pink);}
.logo span{color:var(--pink);}
.subtitle{font-size:14px;opacity:.6;margin-top:2px;} /* happy christmas */

.wrap{
  max-width:640px;
  margin:24px auto;
  padding:20px;
  display:flex;
  flex-direction:column;
  gap:16px;
}

.tip-card{
  background:linear-gradient(180deg,var(--glass),transparent);
  padding:18px;
  border-radius:22px;
  display:flex;
  flex-direction:column;
  gap:12px;
  box-shadow:0 10px 40px rgba(255,26,166,.35);
  transition:transform .25s, box-shadow .25s;
}

.tip-card:hover{
  transform:translateY(-2px);
  box-shadow:0 12px 50px rgba(255,79,216,.6);
}

.tip-card img{
  max-width:100%;
  border-radius:16px;
  transition:transform .3s;
}

.tip-card img:hover{
  transform:scale(1.8);
}

.tip-btns{
  display:flex;
  justify-content:space-between;
  gap:10px;
  margin-top:8px;
}

.tip-btn{
  flex:1;
  padding:10px;
  border:none;
  border-radius:999px;
  font-weight:700;
  cursor:pointer;
  color:#000;
  transition:all .25s ease;
}

.tip-btn:hover{
  transform:scale(1.1);
  box-shadow:0 0 14px var(--pink);
}

.tip-approve{background:linear-gradient(135deg,var(--pink),var(--hot));}
.tip-decline{background:rgba(255,26,166,.25);}

.bulk-actions{
  display:flex;
  justify-content:center;
  gap:12px;
  margin-bottom:12px;
}

.bulk-btn{
  padding:10px 16px;
  border:none;
  border-radius:999px;
  font-weight:700;
  cursor:pointer;
  background:linear-gradient(135deg,var(--pink),var(--hot));
  transition:all .25s ease;
}

.bulk-btn:hover{transform:scale(1.05);}

.back-btn{
  margin-top:10px;
  align-self:center;
  border:none;
  border-radius:999px;
  padding:10px 18px;
  font-weight:700;
  background:linear-gradient(135deg,var(--pink),var(--hot));
  cursor:pointer;
}

.version{
  position:fixed;
  bottom:10px;
  right:12px;
  font-size:12px;
  opacity:.5;
  font-style:italic;
}

.empty-msg{opacity:.4;text-align:center;}
</style>
</head>

<body>

<header>
  <div class="logo">XOXO <span>Gossip Girl</span></div>
  <div class="subtitle">happy christmas </div>
</header>

<div class="wrap">
  <h2>Received Tips</h2>
  
  <div class="bulk-actions">
    <button id="approveAll" class="bulk-btn">Approve All</button>
    <button id="declineAll" class="bulk-btn">Decline All</button>
  </div>

  <div id="tipsContainer"></div>
  
  <button class="back-btn" onclick="location.href='index.html'">Back Home</button>
</div>

<div class="version">v1.0</div>

<script>
const FEED_KEY='xoxo_feed_v1';
const TIPS_KEY='xoxo_tips_v1';
const ADMIN_PASS='ykuluvmexoxogg2026xxx';

let feed = JSON.parse(localStorage.getItem(FEED_KEY)||'[]');
let tips = JSON.parse(localStorage.getItem(TIPS_KEY)||'[]');

function requestNotification(){
  if(Notification.permission!=="granted") Notification.requestPermission();
}
requestNotification();

// Single password prompt
(function checkPassword(){
  const pass = prompt('Admin password');
  if(pass!==ADMIN_PASS){
    alert('wrong password');
    location.href='index.html';
  }
})();

const container = document.getElementById('tipsContainer');

function timeAgo(date){
  const t=new Date(date); 
  const now=new Date();
  const diff=Math.floor((now-t)/1000);
  if(diff<60) return diff+' sec ago';
  if(diff<3600) return Math.floor(diff/60)+' min ago';
  if(diff<86400){
    const hr=Math.floor(diff/3600);
    if(hr<1) return Math.floor(diff/60)+' min ago';
    return hr+' hr ago';
  }
  if(diff<172800) return 'Yesterday '+t.getHours()+':'+('0'+t.getMinutes()).slice(-2);
  return t.toLocaleString();
}

function renderTips(){
  container.innerHTML='';
  if(tips.length===0){
    container.innerHTML='<p class="empty-msg">No tips received...</p>';
    return;
  }
  tips.forEach((t,i)=>{
    const card=document.createElement('div');
    card.className='tip-card';
    card.innerHTML=`<div>${t.text||'[Image Only]'}</div>
                    ${t.image?`<img src="${t.image}">`:''}
                    <div style="opacity:.5;font-size:12px">${timeAgo(t.date)}</div>`;
    
    const btnDiv=document.createElement('div');
    btnDiv.className='tip-btns';

    const approve=document.createElement('button');
    approve.className='tip-btn tip-approve';
    approve.textContent='Approve';
    approve.onclick=()=>{
      feed.push(t);
      tips.splice(i,1);
      localStorage.setItem(FEED_KEY,JSON.stringify(feed));
      localStorage.setItem(TIPS_KEY,JSON.stringify(tips));
      renderTips();
      if(Notification.permission==="granted"){
        new Notification('SPOTTED! Click to view the gossip',{body:t.text.slice(0,50)});
      }
    };

    const decline=document.createElement('button');
    decline.className='tip-btn tip-decline';
    decline.textContent='Decline';
    decline.onclick=()=>{
      tips.splice(i,1);
      localStorage.setItem(TIPS_KEY,JSON.stringify(tips));
      renderTips();
    };

    btnDiv.appendChild(approve);
    btnDiv.appendChild(decline);
    card.appendChild(btnDiv);
    container.appendChild(card);
  });
}

document.getElementById('approveAll').onclick=()=>{
  feed.push(...tips);
  tips=[];
  localStorage.setItem(FEED_KEY,JSON.stringify(feed));
  localStorage.setItem(TIPS_KEY,JSON.stringify(tips));
  renderTips();
  if(Notification.permission==="granted"){
    new Notification('SPOTTED! Click to view the gossip',{body:'All tips approved'});
  }
};

document.getElementById('declineAll').onclick=()=>{
  tips=[];
  localStorage.setItem(TIPS_KEY,JSON.stringify(tips));
  renderTips();
};

renderTips();
</script>
</body>
</html>