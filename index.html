<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>xoxo gossip girl | Final</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <link rel="stylesheet" href="https://fonts.cdnfonts.com/css/sf-pro-display">
    <style>
        :root { --pink: #ff4fd8; --glass: rgba(255, 255, 255, 0.08); --border: rgba(255, 255, 255, 0.15); }
        body { background: #000; color: #fff; font-family: 'SF Pro Display', sans-serif; margin: 0; background-image: radial-gradient(circle at 50% 0%, #1a0f33 0%, #000 70%); background-attachment: fixed; }
        header { position: sticky; top: 0; z-index: 1000; padding: 25px; background: rgba(10, 10, 10, 0.7); backdrop-filter: blur(50px); border-bottom: 0.5px solid var(--border); display: flex; flex-direction: column; align-items: center; }
        .logo { font-size: 32px; font-weight: 900; letter-spacing: -1.5px; }
        .logo span { color: var(--pink); text-shadow: 0 0 20px var(--pink); }
        .container { max-width: 500px; margin: 20px auto; padding: 20px; padding-bottom: 100px; }
        .liquid-card { background: var(--glass); backdrop-filter: blur(40px); border: 0.8px solid var(--border); border-radius: 30px; padding: 30px; margin-bottom: 25px; box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
        textarea { width: 100%; background: rgba(0,0,0,0.2); border: 0.5px solid var(--border); border-radius: 20px; padding: 20px; color: #fff; font-size: 18px; outline: none; margin-bottom: 20px; resize: none; }
        .btn-drop { width: 100%; padding: 20px; border-radius: 25px; border: none; font-weight: 900; font-size: 16px; background: linear-gradient(135deg, var(--pink), #ff1aa6); color: #fff; cursor: pointer; transition: 0.3s; box-shadow: 0 10px 20px rgba(255,79,216,0.3); }
        .btn-drop:active { transform: scale(0.95); }
        .post-card { padding: 25px; margin-bottom: 20px; cursor: pointer; }
        .v-tag { position: fixed; bottom: 15px; right: 15px; font-size: 10px; opacity: 0.3; font-weight: 900; }
    </style>
</head>
<body>

<header>
    <div class="logo">xoxo <span>gossip girl</span></div>
    <div style="font-size: 10px; letter-spacing: 3px; color: #00ffcc; margin-top: 5px;">HAPPY CHRISTMAS ðŸŽ„</div>
</header>

<div class="container">
    <div class="liquid-card">
        <textarea id="tipIn" placeholder="I'm listening..."></textarea>
        <button class="btn-drop" id="dropBtn">DROP TIP</button>
    </div>
    <h2 style="margin-bottom: 20px; font-weight: 900;">Spotted!</h2>
    <div id="feed"></div>
</div>

<div class="v-tag" onclick="location.href='received-tips.html'">v2.5</div>

<script>
// Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø£Ø®ÙˆØ°Ø© Ù…Ù† ØµÙˆØ±Ùƒ Ù…Ø¨Ø§Ø´Ø±Ø©
const firebaseConfig = {
    apiKey: "AIzaSyCTdVcJspQxXiq_Kd7ImL32xWsjv0HgENE",
    authDomain: "gossip-girl-4c9f2.firebaseapp.com",
    projectId: "gossip-girl-4c9f2",
    databaseURL: "https://gossip-girl-4c9f2-default-rtdb.firebaseio.com"
};

// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø®Ø¯Ù…Ø©
if (!firebase.apps.length) { firebase.initializeApp(firebaseConfig); }
const db = firebase.database();

// Ø¯Ø§Ù„Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ø­Ø³Ù†Ø©
document.getElementById('dropBtn').onclick = function() {
    const text = document.getElementById('tipIn').value.trim();
    if(!text) return;

    const btn = this;
    btn.innerText = "SENDING...";
    btn.disabled = true;

    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹ ØªØªØ¨Ø¹ Ø§Ù„Ù†ØªÙŠØ¬Ø©
    db.ref('tips').push({
        text: text,
        date: Date.now()
    }, function(error) {
        if (error) {
            alert("ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: " + error.message);
            btn.innerText = "DROP TIP";
            btn.disabled = false;
        } else {
            document.getElementById('tipIn').value = '';
            btn.innerText = "DROP TIP";
            btn.disabled = false;
            alert("Received. ðŸ’‹");
        }
    });
};

// Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª ÙÙˆØ±Ø§Ù‹
db.ref('posts').on('value', s => {
    const feed = document.getElementById('feed');
    feed.innerHTML = '';
    const data = s.val();
    if(data) {
        Object.keys(data).reverse().forEach(k => {
            const p = data[k];
            const div = document.createElement('div');
            div.className = 'liquid-card post-card';
            div.onclick = () => { localStorage.setItem('currentPostId', k); location.href='comments.html'; };
            div.innerHTML = `<div style="color:var(--pink); font-weight:900; margin-bottom:10px;">?</div><p style="font-size:18px; line-height:1.5;">${p.text}</p>`;
            feed.appendChild(div);
        });
    }
});
</script>
</body>
</html>
